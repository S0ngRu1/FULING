# 赋灵 (Fuling) - AI 角色扮演语音聊天系统

**与你最爱的角色进行一场跨越时空的语音对话。**

-----

## 🌟 项目预览
前端展示


https://github.com/user-attachments/assets/17c1f6a9-d59e-454f-8eb5-829faed5e072



## ✨ 项目理念

**“赋灵”**，取“赋予灵魂”之意。

我们相信，每一个深入人心的角色，无论是来自历史长河、经典文学还是幻想世界，都拥有其独特的“灵魂”。本项目旨在通过前沿的人工智能技术，打破现实与想象的壁垒，为您所钟爱的角色**赋予**鲜活的生命与**灵性**。

用户不再是被动的读者或观众，而是可以成为主动的对话者，与苏格拉底探讨哲学，向福尔摩斯请教推理，甚至和哈利·波特学习咒语。我们致力于创造一个有温度、有深度、极具沉浸感的智能交互体验。

## 🚀 主要功能

  * **实时语音对话**: 通过浏览器实现流畅的语音输入与输出，让交流如打电话般自然。
  * **动态虚拟人**: 角色形象会根据语音输出进行实时的**基础口型同步**，提供更强的视觉临场感。
  * **深度角色扮演**: 基于强大的 **LLM** 模型，确保每个角色都严格遵守其人设、背景和说话风格，提供高质量的对话内容。
  * **角色专属技能**: 特定角色拥有超越普通聊天的独特技能，如苏格拉底的“诘问式思考”、福尔摩斯的“演绎法推理”等，增加了互动性和趣味性。
  * **简洁的用户界面**: 专注核心体验，提供清晰的角色选择和对话界面。

## 核心聊天接口

### `POST /api/chat`

**功能:** 发送用户消息和对话历史，获取AI角色的回复及其当前情绪状态。

**请求体 (Request Body - JSON):**

```json
{
  "characterId": "socrates",
  "message": "什么是美德？",
  "history": [
    {
      "role": "user",
      "content": "你好，苏格拉底先生。"
    },
    {
      "role": "assistant",
      "content": "你好，年轻的思考者。你今天带来了什么问题？"
    }
  ]
}
```

**字段说明:**
* `characterId` (string, 必填): 角色的唯一标识符，用于后端加载对应的Prompt。
* `message` (string, 必填): 用户当前输入的最新一句话。
* `history` (array of objects, 必填): 最近的对话历史，用于实现多轮对话记忆。
    * `role` (string): 角色，`"user"` 代表用户, `"assistant"` 代表AI。
    * `content` (string): 该角色的发言内容。

**响应体 (Response Body - JSON):**

```json
{
  "responseText": "一个好问题！在我们探讨它之前，你认为一个‘好’的人应该具备哪些品质呢？",
  "emotion": "沉思"
}
```
**字段说明:**
* `responseText` (string): AI生成的文本回复。
* `emotion`  (string): AI根据对话计算出的当前情绪状态。


---

## 对话摘要接口

### `POST /api/summarize`

**功能:** 在对话结束时，由前端发送完整的对话历史，后端调用LLM进行摘要并储存，用于实现角色的长程记忆。

**请求体 (Request Body - JSON):**

```json
{
  "characterId": "socrates",
  "history": [
    {
      "role": "user",
      "content": "你好，苏格拉底先生。"
    },
    {
      "role": "assistant",
      "content": "你好，年轻的思考者。你今天带来了什么问题？"
    },
    {
      "role": "user",
      "content": "什么是美德？"
    },
    {
      "role": "assistant",
      "content": "一个好问题！在我们探讨它之前，你认为一个‘好’的人应该具备哪些品质呢？"
    }
  ]
}
```
* **字段说明:** 与 `/api/chat` 的请求结构类似，但`history`字段包含本次对话的完整记录。

**响应体 (Response Body - JSON):**

```json
{
  "status": "success",
  "summary": "本次对话中，用户与苏格拉底探讨了关于“美德”的定义，苏格拉底通过反问引导用户思考“好”的品质。"
}
```
* **字段说明:**
    * `status` (string): 表示操作是否成功。
    * `summary` (string): LLM生成的本次对话摘要。
